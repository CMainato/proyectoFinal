{"version":3,"sources":["./src/app/home/home.page.html","./src/app/home/home.module.ts","./src/app/home/home.page.scss","./src/app/home/home.page.ts"],"names":[],"mappings":"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","file":"home-home-module-es5.js","sourcesContent":["module.exports = \"<ion-header  >\\r\\n    <ion-toolbar text-center >\\r\\n      <ion-buttons slot=\\\"start\\\">\\r\\n        <ion-avatar class=\\\"header-avatar\\\">\\r\\n          <img src=\\\"assets/img/user.jpg\\\" alt=\\\"User Image\\\" />\\r\\n        </ion-avatar>\\r\\n      </ion-buttons>\\r\\n      <ion-buttons slot=\\\"end\\\">\\r\\n        <ion-menu-button></ion-menu-button>\\r\\n      </ion-buttons>\\r\\n      <ion-title text-center>\\r\\n        <img src=\\\"assets/img/logo.png\\\" alt=\\\"Platzi Logo\\\" height=\\\"32px\\\" />\\r\\n      </ion-title>\\r\\n    </ion-toolbar>\\r\\n  </ion-header>\\r\\n  <ion-content > \\r\\n\\r\\n<iframe src=\\\"https://open.spotify.com/embed/playlist/37i9dQZF1DX4oL1xd4OWmV\\\"  frameborder=\\\"0\\\"\\r\\nallowtransparency=\\\"true\\\" allow=\\\"encrypted-media\\\"></iframe>\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { HomePage } from './home.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: HomePage\r\n      }\r\n    ])\r\n  ],\r\n  declarations: [HomePage]\r\n})\r\nexport class HomePageModule {}\r\n","module.exports = \"iframe {\\n  display: block;\\n  margin-left: auto;\\n  margin-right: auto;\\n  width: 900px;\\n  height: 1000px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9DOlxcVXNlcnNcXHVzdWFyaW9cXERvY3VtZW50c1xcVG9waWNvcyBFc3BlY2lhbGVzXFxwcm95ZWN0b1xcTXVzaWMvc3JjXFxhcHBcXGhvbWVcXGhvbWUucGFnZS5zY3NzIiwic3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsY0FBQTtFQUNBLGlCQUFBO0VBQ0Usa0JBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlmcmFtZXtcclxuICBkaXNwbGF5OiBibG9jaztcclxuICBtYXJnaW4tbGVmdDogYXV0bztcclxuICAgIG1hcmdpbi1yaWdodDogYXV0bztcclxuICAgIHdpZHRoOiA5MDBweDtcclxuICAgIGhlaWdodDogMTAwMHB4O1xyXG59XHJcbiIsImlmcmFtZSB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICB3aWR0aDogOTAwcHg7XG4gIGhlaWdodDogMTAwMHB4O1xufSJdfQ== */\"","import { Component } from \"@angular/core\";\r\nimport { MusicService } from \"../services/music.service\";\r\nimport { SongsModalPage } from \"../songs-modal/songs-modal.page\";\r\nimport { ModalController, LoadingController } from \"@ionic/angular\";\r\n\r\n@Component({\r\n  selector: \"app-home\",\r\n  templateUrl: \"home.page.html\",\r\n  styleUrls: [\"home.page.scss\"]\r\n})\r\nexport class HomePage {\r\n  slideOpts = {\r\n    initialSlide: 3,\r\n    slidesPerView: 4,\r\n    centeredSlides: true,\r\n    speed: 400\r\n  };\r\n  newReleases: any[] = [];\r\n  artists: any[] = [];\r\n  favorites: any[] = [];\r\n  song: any = {};\r\n  newTime: number = 0;\r\n  pausedTime: number = 0;\r\n  playing: boolean = false;\r\n  dataReturned: any;\r\n  songName: any;\r\n  currentSong: any = {};\r\n  constructor(\r\n    private musicService: MusicService,\r\n    public modalController: ModalController,\r\n    public loadingController: LoadingController\r\n  ) {}\r\n\r\n  ionViewDidEnter() {\r\n    this.musicService.getNewReleases().then(newReleases => {\r\n      this.newReleases = this.favorites = newReleases.albums.items;\r\n    });\r\n    this.artists = this.musicService.getArtists();\r\n  }\r\n  play(song) {\r\n    const previewUrl = song ? song.preview_url : this.currentSong.preview_url;\r\n    this.song = new Audio(previewUrl);\r\n    this.song.addEventListener(\"timeupdate\", () => {\r\n      this.newTime = (this.song.currentTime * (this.song.duration / 10)) / 100;\r\n    });\r\n    this.song.play();\r\n    this.song.currentTime = this.pausedTime;\r\n    this.playing = true;\r\n  }\r\n  pause() {\r\n    if (this.song) {\r\n      this.song.pause();\r\n    }\r\n\r\n    this.pausedTime = this.song.currentTime;\r\n    this.playing = false;\r\n  }\r\n  reset() {\r\n    if (this.playing) {\r\n      this.song.pause();\r\n    }\r\n    this.newTime = this.pausedTime = this.song.currentTime = 0;\r\n    this.playing = false;\r\n  }\r\n  markAsFavourite() {\r\n    this.song.favourite = true;\r\n    // Implement some backend logic here\r\n  }\r\n  markAsNonFavourite() {\r\n    this.song.favourite = false;\r\n    // Implement some backend logic here\r\n  }\r\n  parseTime(time = \"0.00\") {\r\n    if (time) {\r\n      const partTime = parseInt(time.toString().split(\".\")[0], 10);\r\n\r\n      let minutes = Math.floor(partTime / 60).toString();\r\n      if (minutes.length == 1) {\r\n        minutes = \"0\" + minutes;\r\n      }\r\n      let seconds = (partTime % 60).toString();\r\n      if (seconds.length == 1) {\r\n        seconds = \"0\" + seconds;\r\n      }\r\n      return minutes + \":\" + seconds;\r\n    }\r\n  }\r\n\r\n  async showSongs(artist) {\r\n    const loading = await this.loadingController.create({\r\n      message: \"Cargando las canciones del artista\"\r\n    });\r\n    await loading.present();\r\n    const songs = await this.musicService.getArtistTopTracks(artist.id);\r\n    const modal = await this.modalController.create({\r\n      component: SongsModalPage,\r\n      componentProps: {\r\n        songs: songs.tracks,\r\n        artist: artist.name\r\n      }\r\n    });\r\n    loading.dismiss();\r\n\r\n    modal.onDidDismiss().then(dataReturned => {\r\n      if (dataReturned !== null) {\r\n        this.dataReturned = dataReturned.data;\r\n        if (dataReturned) {\r\n          //Play a la canciÃ³n!\r\n          this.newTime = 0;\r\n          this.reset();\r\n          this.currentSong = this.dataReturned;\r\n          // delayIntencional\r\n          setTimeout(() => {\r\n            this.play(this.dataReturned);\r\n          }, 200);\r\n        }\r\n      }\r\n    });\r\n\r\n    return await modal.present();\r\n  }\r\n}\r\n"],"sourceRoot":""}