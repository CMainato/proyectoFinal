{"version":3,"sources":["./src/app/home/home.page.html","./src/app/home/home.module.ts","./src/app/home/home.page.scss","./src/app/home/home.page.ts"],"names":[],"mappings":"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","file":"home-home-module-es2015.js","sourcesContent":["module.exports = \"<ion-header  >\\r\\n    <ion-toolbar text-center >\\r\\n      <ion-buttons slot=\\\"start\\\">\\r\\n        <ion-avatar class=\\\"header-avatar\\\">\\r\\n          <img src=\\\"assets/img/user.jpg\\\" alt=\\\"User Image\\\" />\\r\\n        </ion-avatar>\\r\\n      </ion-buttons>\\r\\n      <ion-buttons slot=\\\"end\\\">\\r\\n        <ion-menu-button></ion-menu-button>\\r\\n      </ion-buttons>\\r\\n      <ion-title text-center>\\r\\n        <img src=\\\"assets/img/logo.png\\\" alt=\\\"Platzi Logo\\\" height=\\\"32px\\\" />\\r\\n      </ion-title>\\r\\n    </ion-toolbar>\\r\\n  </ion-header>\\r\\n  <ion-content > \\r\\n\\r\\n<iframe src=\\\"https://open.spotify.com/embed/playlist/37i9dQZF1DX4oL1xd4OWmV\\\"  frameborder=\\\"0\\\"\\r\\nallowtransparency=\\\"true\\\" allow=\\\"encrypted-media\\\"></iframe>\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { HomePage } from './home.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: HomePage\r\n      }\r\n    ])\r\n  ],\r\n  declarations: [HomePage]\r\n})\r\nexport class HomePageModule {}\r\n","module.exports = \"iframe {\\n  display: block;\\n  margin-left: auto;\\n  margin-right: auto;\\n  width: 900px;\\n  height: 1000px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9DOlxcVXNlcnNcXHVzdWFyaW9cXERvY3VtZW50c1xcVG9waWNvcyBFc3BlY2lhbGVzXFxwcm95ZWN0b1xcTXVzaWMvc3JjXFxhcHBcXGhvbWVcXGhvbWUucGFnZS5zY3NzIiwic3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsY0FBQTtFQUNBLGlCQUFBO0VBQ0Usa0JBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlmcmFtZXtcclxuICBkaXNwbGF5OiBibG9jaztcclxuICBtYXJnaW4tbGVmdDogYXV0bztcclxuICAgIG1hcmdpbi1yaWdodDogYXV0bztcclxuICAgIHdpZHRoOiA5MDBweDtcclxuICAgIGhlaWdodDogMTAwMHB4O1xyXG59XHJcbiIsImlmcmFtZSB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICB3aWR0aDogOTAwcHg7XG4gIGhlaWdodDogMTAwMHB4O1xufSJdfQ== */\"","import { Component } from \"@angular/core\";\r\nimport { MusicService } from \"../services/music.service\";\r\nimport { SongsModalPage } from \"../songs-modal/songs-modal.page\";\r\nimport { ModalController, LoadingController } from \"@ionic/angular\";\r\n\r\n@Component({\r\n  selector: \"app-home\",\r\n  templateUrl: \"home.page.html\",\r\n  styleUrls: [\"home.page.scss\"]\r\n})\r\nexport class HomePage {\r\n  slideOpts = {\r\n    initialSlide: 3,\r\n    slidesPerView: 4,\r\n    centeredSlides: true,\r\n    speed: 400\r\n  };\r\n  newReleases: any[] = [];\r\n  artists: any[] = [];\r\n  favorites: any[] = [];\r\n  song: any = {};\r\n  newTime: number = 0;\r\n  pausedTime: number = 0;\r\n  playing: boolean = false;\r\n  dataReturned: any;\r\n  songName: any;\r\n  currentSong: any = {};\r\n  constructor(\r\n    private musicService: MusicService,\r\n    public modalController: ModalController,\r\n    public loadingController: LoadingController\r\n  ) {}\r\n\r\n  ionViewDidEnter() {\r\n    this.musicService.getNewReleases().then(newReleases => {\r\n      this.newReleases = this.favorites = newReleases.albums.items;\r\n    });\r\n    this.artists = this.musicService.getArtists();\r\n  }\r\n  play(song) {\r\n    const previewUrl = song ? song.preview_url : this.currentSong.preview_url;\r\n    this.song = new Audio(previewUrl);\r\n    this.song.addEventListener(\"timeupdate\", () => {\r\n      this.newTime = (this.song.currentTime * (this.song.duration / 10)) / 100;\r\n    });\r\n    this.song.play();\r\n    this.song.currentTime = this.pausedTime;\r\n    this.playing = true;\r\n  }\r\n  pause() {\r\n    if (this.song) {\r\n      this.song.pause();\r\n    }\r\n\r\n    this.pausedTime = this.song.currentTime;\r\n    this.playing = false;\r\n  }\r\n  reset() {\r\n    if (this.playing) {\r\n      this.song.pause();\r\n    }\r\n    this.newTime = this.pausedTime = this.song.currentTime = 0;\r\n    this.playing = false;\r\n  }\r\n  markAsFavourite() {\r\n    this.song.favourite = true;\r\n    // Implement some backend logic here\r\n  }\r\n  markAsNonFavourite() {\r\n    this.song.favourite = false;\r\n    // Implement some backend logic here\r\n  }\r\n  parseTime(time = \"0.00\") {\r\n    if (time) {\r\n      const partTime = parseInt(time.toString().split(\".\")[0], 10);\r\n\r\n      let minutes = Math.floor(partTime / 60).toString();\r\n      if (minutes.length == 1) {\r\n        minutes = \"0\" + minutes;\r\n      }\r\n      let seconds = (partTime % 60).toString();\r\n      if (seconds.length == 1) {\r\n        seconds = \"0\" + seconds;\r\n      }\r\n      return minutes + \":\" + seconds;\r\n    }\r\n  }\r\n\r\n  async showSongs(artist) {\r\n    const loading = await this.loadingController.create({\r\n      message: \"Cargando las canciones del artista\"\r\n    });\r\n    await loading.present();\r\n    const songs = await this.musicService.getArtistTopTracks(artist.id);\r\n    const modal = await this.modalController.create({\r\n      component: SongsModalPage,\r\n      componentProps: {\r\n        songs: songs.tracks,\r\n        artist: artist.name\r\n      }\r\n    });\r\n    loading.dismiss();\r\n\r\n    modal.onDidDismiss().then(dataReturned => {\r\n      if (dataReturned !== null) {\r\n        this.dataReturned = dataReturned.data;\r\n        if (dataReturned) {\r\n          //Play a la canciÃ³n!\r\n          this.newTime = 0;\r\n          this.reset();\r\n          this.currentSong = this.dataReturned;\r\n          // delayIntencional\r\n          setTimeout(() => {\r\n            this.play(this.dataReturned);\r\n          }, 200);\r\n        }\r\n      }\r\n    });\r\n\r\n    return await modal.present();\r\n  }\r\n}\r\n"],"sourceRoot":""}